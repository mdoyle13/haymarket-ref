<% theme ||= false -%>
<head>
  <title><%= browser_title(yield(:title)) %></title>
  <%= render :partial => 'shared/google_analytics' unless local_request? %>
  <%= "<!--[if lt IE 9]>#{javascript_include_tag('http://html5shiv.googlecode.com/svn/trunk/html5.js')}<![endif]-->".html_safe if request.env['HTTP_USER_AGENT'] =~ /MSIE/ %>
  
<%= stylesheet_link_tag "application", "formatting", :theme => theme %>
<%= stylesheet_link_tag "jquery-ui-1.8.6.custom.css", :theme => theme %>

  <%= stylesheet_link_tag "theme" %>
   <%= stylesheet_link_tag "home", :theme => theme if home_page? %>
  <%= "<!--[if IE 7]>#{stylesheet_link_tag 'ie7'}<![endif]-->" if request.env['HTTP_USER_AGENT'] =~ /MSIE/ -%>
  <link rel="shortcut icon" href="/favicon.ico" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <%= "<meta name=\"keywords\" content=\"#{@meta.meta_keywords}\" />" if @meta.meta_keywords.present? %>
  <%= "<meta name=\"description\" content=\"#{@meta.meta_description}\" />" if @meta.meta_description.present? -%>
  <%= yield :head_libraries %>
  <%= yield :head %>
 <%= javascript_include_tag "jquery", "jquery-ui", "application", "printelement", :theme => theme %>
	<% if request.path == "/" %>
		<%= javascript_include_tag "frogaloop.js", :theme => theme %>		
		<%= javascript_include_tag "jquery.flexslider-min.js", :theme => theme %>		
		<%= stylesheet_link_tag "flexslider", :theme => theme %>
		<script type="text/javascript" charset="utf-8">
		  $(window).load(function() {
				var vimeoPlayers = jQuery('.flexslider').find('iframe'), player;

				for (var i = 0, length = vimeoPlayers.length; i < length; i++) {
				        player = vimeoPlayers[i];
				        $f(player).addEvent('ready', ready);
				}

				function addEvent(element, eventName, callback) {
				    if (element.addEventListener) {
				        element.addEventListener(eventName, callback, false)
				    } else {
				        element.attachEvent(eventName, callback, false);
				    }
				}

				function ready(player_id) {
				    var froogaloop = $f(player_id);
				    froogaloop.addEvent('play', function(data) {
				     jQuery('.flexslider').flexslider("pause");
				    });

				    froogaloop.addEvent('pause', function(data) {
				        jQuery('.flexslider').flexslider("play");
				    });
				}

				jQuery(".flexslider")

				.flexslider({
				    animation: "slide",
				    animationLoop: true,
				    smoothHeight: true,
				    slideshow: true,
						slideshowSpeed: 8000,
						pauseOnHover: true,
						video: true,
				    useCSS: false,
				    before: function(slider){
				        if (slider.slides.eq(slider.currentSlide).find('iframe').length !== 0)
				           $f( slider.slides.eq(slider.currentSlide).find('iframe').attr('id') ).api('pause');
				           /* ------------------  YOUTUBE FOR AUTOSLIDER ------------------ */
				           playVideoAndPauseOthers($('.play3 iframe')[0]);
				    }


				});

				function playVideoAndPauseOthers(frame) {
				$('iframe').each(function(i) {
				var func = this === frame ? 'playVideo' : 'stopVideo';
				this.contentWindow.postMessage('{"event":"command","func":"' + func + '","args":""}', '*');
				});
				}

				/* ------------------ PREV & NEXT BUTTON FOR FLEXSLIDER (YOUTUBE) ------------------ */
				$('.flex-next, .flex-prev').click(function() {
				playVideoAndPauseOthers($('.play3 iframe')[0]);
				});
		  });
		</script>
	<% end %>
	<script type="text/javascript" charset="utf-8">
		$(document).ready(function() {
			//$('.accordion').accordion({collapsible:true,active:false,autoHeight:false,icons: { 'header': 'ui-icon-plus', 'headerSelected': 'ui-icon-minus' }});
			$( "#tabs" ).tabs();
			$( "#menu_container" ).tabs({ selected: 2});
		});
	</script>
</head>
